[supervisord]
logfile = %(ENV_WORK_FOLDER_PATH)s/supervisor/supervisor.log
pidfile = %(ENV_WORK_FOLDER_PATH)s/supervisor/supervisor.pid
loglevel = error

[program:fcgiwrap]
command = make fcgiwrap FCGIWRAP_SOCK_NAME="fcgiwrap.sock"

[program:nginx]
command = make nginx FCGIWRAP_SOCK_NAME="fcgiwrap-sniffed.sock" FCGI_SCRIPT_FILENAME="%(ENV_FCGI_SCRIPT_FILENAME)s"
redirect_stderr = true
stdout_logfile = /dev/fd/1
stdout_logfile_maxbytes = 0

[program:socat]
command = socat -t100 -v -x UNIX-LISTEN:"%(ENV_WORK_FOLDER_PATH)s/fcgiwrap/fcgiwrap-sniffed.sock,mode=777,reuseaddr,fork" UNIX-CONNECT:"%(ENV_WORK_FOLDER_PATH)s/fcgiwrap/fcgiwrap.sock"
redirect_stderr = true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0

#[program:git-clone]
#command = bash -c "sleep 5 && make git-clone && tail -f /dev/null"
